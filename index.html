<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resolución de Ecuaciones Lineales y Cuadráticas</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    label, input, select {
      margin: 5px;
    }
    canvas {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>Resolver Ecuaciones Lineales y Cuadráticas</h2>

  <label>Tipo de ecuación:</label>
  <select id="tipo">
    <option value="lineal">Lineal (ax + b)</option>
    <option value="cuadratica">Cuadrática (ax² + bx + c)</option>
  </select><br>

  <label>a:</label><input type="number" id="a" value="1">
  <label>b:</label><input type="number" id="b" value="0">
  <label>c:</label><input type="number" id="c" value="0"><br><br>

  <button onclick="resolver()">Resolver</button>

  <h3>Detalles:</h3>
  <p id="ecuacion"></p>
  <p id="resultado"></p>
  <p id="dominio"></p>
  <p id="rango"></p>

  <canvas id="grafica" width="700" height="400"></canvas>

  <script>
    let chart;

    function resolver() {
      const tipo = document.getElementById("tipo").value;
      const a = parseFloat(document.getElementById("a").value);
      const b = parseFloat(document.getElementById("b").value);
      const c = parseFloat(document.getElementById("c").value);

      const resultado = document.getElementById("resultado");
      const dominio = document.getElementById("dominio");
      const rango = document.getElementById("rango");
      const ecuacion = document.getElementById("ecuacion");

      let xVals = [], yVals = [];
      let ymin = Infinity, ymax = -Infinity;

      for (let x = -20; x <= 20; x += 0.5) {
        let y = tipo === "lineal" ? a * x + b : a * x * x + b * x + c;
        xVals.push(x);
        yVals.push(y);
        if (y < ymin) ymin = y;
        if (y > ymax) ymax = y;
      }

      // Mostrar ecuación
      let eqText = tipo === "lineal"
        ? `f(x) = ${a}x ${b >= 0 ? "+" : "-"} ${Math.abs(b)}`
        : `f(x) = ${a}x² ${b >= 0 ? "+" : "-"} ${Math.abs(b)}x ${c >= 0 ? "+" : "-"} ${Math.abs(c)}`;
      ecuacion.textContent = `Ecuación: ${eqText}`;

      // Mostrar soluciones
      if (tipo === "lineal") {
        if (a !== 0) {
          const x = -b / a;
          resultado.textContent = `Raíz: x = ${x.toFixed(2)}`;
        } else {
          resultado.textContent = b === 0 ? "Infinitas soluciones" : "Sin solución";
        }
      } else {
        const d = b * b - 4 * a * c;
        if (d > 0) {
          const x1 = (-b + Math.sqrt(d)) / (2 * a);
          const x2 = (-b - Math.sqrt(d)) / (2 * a);
          resultado.textContent = `Raíces: x₁ = ${x1.toFixed(2)}, x₂ = ${x2.toFixed(2)}`;
        } else if (d === 0) {
          const x = -b / (2 * a);
          resultado.textContent = `Raíz doble: x = ${x.toFixed(2)}`;
        } else {
          resultado.textContent = "Raíces complejas (no se grafican)";
        }
      }

      // Mostrar dominio y rango
      dominio.textContent = `Dominio: [-20, 20]`;
      rango.textContent = `Rango aproximado: [${ymin.toFixed(2)}, ${ymax.toFixed(2)}]`;

      // Graficar
      const ctx = document.getElementById("grafica").getContext("2d");
      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: "line",
        data: {
          labels: xVals,
          datasets: [{
            label: 'f(x)',
            data: yVals,
            borderColor: "blue",
            borderWidth: 2,
            fill: false,
            pointRadius: 0
          }]
        },
        options: {
          responsive: false,
          scales: {
            x: {
              type: 'linear',
              min: -20,
              max: 20,
              title: { display: true, text: "x" },
              ticks: { stepSize: 5 }
            },
            y: {
              min: -20,
              max: 20,
              title: { display: true, text: "f(x)" },
              ticks: { stepSize: 5 }
            }
          },
          plugins: {
            legend: { display: false }
          }
        }
      });
    }
  </script>
</body>
</html>
